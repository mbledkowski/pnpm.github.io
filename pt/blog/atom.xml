<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://pnpm.io/pt/blog</id>
    <title>pnpm Blog</title>
    <updated>2022-12-30T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://pnpm.io/pt/blog"/>
    <subtitle>pnpm Blog</subtitle>
    <icon>https://pnpm.io/pt/img/favicon.png</icon>
    <entry>
        <title type="html"><![CDATA[O ano de 2022 para o pnpm]]></title>
        <id>https://pnpm.io/pt/blog/2022/12/30/yearly-update</id>
        <link href="https://pnpm.io/pt/blog/2022/12/30/yearly-update"/>
        <updated>2022-12-30T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[É o final do ano. Um ano muito difícil. Como você deve saber, moro na Ucrânia, então devido à guerra da Rússia contra nós, foi mais difícil liderar este projeto do que nos anos anteriores. Ainda assim, foi um bom ano para o pnpm. Temos muitos novos usuários, colaboradores e implementamos muitos recursos excelentes.]]></summary>
        <content type="html"><![CDATA[<p>É o final do ano. Um ano muito difícil. Como você deve saber, moro na Ucrânia, então devido à guerra da Rússia contra nós, foi mais difícil liderar este projeto do que nos anos anteriores. Ainda assim, foi um bom ano para o pnpm. Temos muitos novos usuários, colaboradores e implementamos muitos recursos excelentes.</p><p><img loading="lazy" src="/pt/assets/images/2022-review-092f8f0dfe82b760c2e90fd776d82f75.png" width="640" height="640" class="img_XicP"></p><p>(a ilustração acima foi gerada pela Midjourney. O tigre simboliza o ano do tigre)</p><h2 class="anchor anchorWithStickyNavbar_M9ON" id="uso">Uso<a href="#uso" class="hash-link" aria-label="Link direto para Uso" title="Link direto para Uso">​</a></h2><h3 class="anchor anchorWithStickyNavbar_M9ON" id="números-sobre-downloads">Números sobre Downloads<a href="#números-sobre-downloads" class="hash-link" aria-label="Link direto para Números sobre Downloads" title="Link direto para Números sobre Downloads">​</a></h3><p>Meu objetivo este ano era bater Lerna pelo número de downloads. Conseguimos atingir essa meta <a href="https://npm-stat.com/charts.html?package=pnpm&amp;package=lerna&amp;from=2022-01-01&amp;to=2022-12-30" target="_blank" rel="noopener noreferrer">em agosto</a>:</p><p><img loading="lazy" src="/pt/assets/images/pnpm-vs-lerna-stats-cad28f3b9685ef684c864f919f7f9c5e.png" width="997" height="400" class="img_XicP"></p><p>pnpm foi baixado <a href="https://npm-stat.com/charts.html?package=pnpm&amp;from=2016-12-01&amp;to=2022-12-30" target="_blank" rel="noopener noreferrer">5 vezes mais</a> em 2022 do que em 2021:</p><p><img loading="lazy" src="/pt/assets/images/download-stats-2022-e4de79bf61e1066802166f9d97cb36ac.png" width="997" height="400" class="img_XicP"></p><h3 class="anchor anchorWithStickyNavbar_M9ON" id="visitas-na-documentação">Visitas na Documentação<a href="#visitas-na-documentação" class="hash-link" aria-label="Link direto para Visitas na Documentação" title="Link direto para Visitas na Documentação">​</a></h3><p>Coletamos algumas estatísticas não personalizadas de nossa documentação usando o Google Analytics. Em 2022, algumas vezes tivemos mais de 20.000 visitantes únicos dentro de uma semana. Isso é 10 vezes mais do que em 2021!</p><p><img loading="lazy" src="/pt/assets/images/ga-unique-visits-2022-b2e9bf0b6c559a5c59fdbfd8bb1861f0.png" width="778" height="391" class="img_XicP"></p><h3 class="anchor anchorWithStickyNavbar_M9ON" id="estrelas-no-github">Estrelas no GitHub<a href="#estrelas-no-github" class="hash-link" aria-label="Link direto para Estrelas no GitHub" title="Link direto para Estrelas no GitHub">​</a></h3><p>Nosso <a href="https://github.com/pnpm/pnpm" target="_blank" rel="noopener noreferrer">repositório principal do GitHub</a> recebeu +7.000 estrelas este ano.</p><p><img loading="lazy" src="/pt/assets/images/stars-2022-434ca95e6da688fdff1bb1bf89d6a2d9.png" width="584" height="787" class="img_XicP"></p><h3 class="anchor anchorWithStickyNavbar_M9ON" id="nossos-colaboradores">Nossos colaboradores<a href="#nossos-colaboradores" class="hash-link" aria-label="Link direto para Nossos colaboradores" title="Link direto para Nossos colaboradores">​</a></h3><p>Tivemos muitos contribuidores novos e ativos este ano. Estas são as pessoas que mesclam pelo menos uma "Pull Request" em 2022:</p><ul><li><a href="https://github.com/zkochan" target="_blank" rel="noopener noreferrer">Zoltan Kochan</a></li><li><a href="https://github.com/lvqq" target="_blank" rel="noopener noreferrer">chlorine</a></li><li><a href="https://github.com/await-ovo" target="_blank" rel="noopener noreferrer">await-ovo</a></li><li><a href="https://github.com/gluxon" target="_blank" rel="noopener noreferrer">Brandon Cheng</a></li><li><a href="https://github.com/d3lm" target="_blank" rel="noopener noreferrer">Dominic Elm</a></li><li><a href="https://github.com/mcmxcdev" target="_blank" rel="noopener noreferrer">MCMXC</a></li><li><a href="https://github.com/dev-itsheng" target="_blank" rel="noopener noreferrer">那里好脏不可以</a></li><li><a href="https://github.com/HomyeeKing" target="_blank" rel="noopener noreferrer">Homyee King</a></li><li><a href="https://github.com/Shinyaigeek" target="_blank" rel="noopener noreferrer">Shinobu Hayashi</a></li><li><a href="https://github.com/BlackHole1" target="_blank" rel="noopener noreferrer">Black-Hole</a></li><li><a href="https://github.com/kenrick95" target="_blank" rel="noopener noreferrer">Kenrick</a></li><li><a href="https://github.com/weyert" target="_blank" rel="noopener noreferrer">Weyert de Boer</a></li><li><a href="https://github.com/gwhitney" target="_blank" rel="noopener noreferrer">Glen Whitney</a></li><li><a href="https://github.com/chengcyber" target="_blank" rel="noopener noreferrer">Cheng</a></li><li><a href="https://github.com/fireairforce" target="_blank" rel="noopener noreferrer">zoomdong</a></li><li><a href="https://github.com/ufec" target="_blank" rel="noopener noreferrer">thinkhalo</a></li><li><a href="https://github.com/LuciNyan" target="_blank" rel="noopener noreferrer">子瞻 Luci</a></li><li><a href="https://github.com/Spencer17x" target="_blank" rel="noopener noreferrer">spencer17x</a></li><li><a href="https://github.com/liuxingbaoyu" target="_blank" rel="noopener noreferrer">liuxingbaoyu</a></li><li><a href="https://github.com/WhiteKiwi" target="_blank" rel="noopener noreferrer">장지훈</a></li><li><a href="https://github.com/jondlm" target="_blank" rel="noopener noreferrer">Jon de la Motte</a></li><li><a href="https://github.com/Jack-Works" target="_blank" rel="noopener noreferrer">Jack Works</a></li><li><a href="https://github.com/milahu" target="_blank" rel="noopener noreferrer">milahu</a></li><li><a href="https://github.com/David-Collins" target="_blank" rel="noopener noreferrer">David Collins</a></li><li><a href="https://github.com/nikoladev" target="_blank" rel="noopener noreferrer">nikoladev</a></li><li><a href="https://github.com/ibezkrovnyi" target="_blank" rel="noopener noreferrer">Igor Bezkrovnyi</a></li><li><a href="https://github.com/illright" target="_blank" rel="noopener noreferrer">Lev Chelyadinov</a></li><li><a href="https://github.com/javier-garcia-meteologica" target="_blank" rel="noopener noreferrer">javier-garcia-meteologica</a></li></ul><h2 class="anchor anchorWithStickyNavbar_M9ON" id="features-que-se-destacam">Features que se destacam<a href="#features-que-se-destacam" class="hash-link" aria-label="Link direto para Features que se destacam" title="Link direto para Features que se destacam">​</a></h2><h3 class="anchor anchorWithStickyNavbar_M9ON" id="suportando-um-hoisted-node_modules-sem-links-simbólicos-desde-v6250">Suportando um hoisted <code>node_modules</code> sem links simbólicos (desde <a href="https://github.com/pnpm/pnpm/releases/tag/v6.25.0" target="_blank" rel="noopener noreferrer">v6.25.0</a>)<a href="#suportando-um-hoisted-node_modules-sem-links-simbólicos-desde-v6250" class="hash-link" aria-label="Link direto para suportando-um-hoisted-node_modules-sem-links-simbólicos-desde-v6250" title="Link direto para suportando-um-hoisted-node_modules-sem-links-simbólicos-desde-v6250">​</a></h3><p>Logo no início de 2022, nós adicionamos suporte para o “tradicional” hoisted (também conhecido como flat <code>node_modules</code>). Usamos o algoritmo de elevação do Yarn para criar um <code>node_modules</code>elevado adequado. Esta nova configuração basicamente tornou o pnpm compatível com todos os stack de Node.js que são compatíveis com a CLI do npm.</p><p>Para usar a estrutura de diretório hoisted <code>node_modules</code>, use a configuração <code>node-linker=hoisted</code> em um arquivo <code>.npmrc</code>.</p><h3 class="anchor anchorWithStickyNavbar_M9ON" id="cache-de-efeitos-colaterais-desde-v700">Cache de efeitos colaterais (desde <a href="https://github.com/pnpm/pnpm/releases/tag/v7.0.0" target="_blank" rel="noopener noreferrer">v7.0.0</a>)<a href="#cache-de-efeitos-colaterais-desde-v700" class="hash-link" aria-label="Link direto para cache-de-efeitos-colaterais-desde-v700" title="Link direto para cache-de-efeitos-colaterais-desde-v700">​</a></h3><p>Desde v7, <a href="/pt/npmrc#side-effects-cache">side-effect-cache</a> é ativado por padrão, então as dependências que devem ser construídas são construídas apenas uma vez por máquina. Isso melhora muito a velocidade de instalação em projetos que têm dependências com scripts de compilação.</p><h3 class="anchor anchorWithStickyNavbar_M9ON" id="correção-de-dependências-desde-v740">Correção de dependências (desde <a href="https://github.com/pnpm/pnpm/releases/tag/v7.4.0" target="_blank" rel="noopener noreferrer">v7.4.0</a>)<a href="#correção-de-dependências-desde-v740" class="hash-link" aria-label="Link direto para correção-de-dependências-desde-v740" title="Link direto para correção-de-dependências-desde-v740">​</a></h3><p>O comando <a href="/pt/cli/patch"><code>pnpm patch</code></a> foi adicionado para corrigir dependências em seus <code>node_modules</code>.</p><h3 class="anchor anchorWithStickyNavbar_M9ON" id="estratégia-de-resolução-baseada-em-tempo-desde-v7100">Estratégia de resolução baseada em tempo (desde <a href="https://github.com/pnpm/pnpm/releases/tag/v7.10.0" target="_blank" rel="noopener noreferrer">v7.10.0</a>)<a href="#estratégia-de-resolução-baseada-em-tempo-desde-v7100" class="hash-link" aria-label="Link direto para estratégia-de-resolução-baseada-em-tempo-desde-v7100" title="Link direto para estratégia-de-resolução-baseada-em-tempo-desde-v7100">​</a></h3><p>Um novo modo de resolução foi adicionado ao pnpm, que deve tornar a atualização de dependências mais segura. Você pode alterar o modo de resolução com a configuração <a href="https://pnpm.io/npmrc#resolution-mode" target="_blank" rel="noopener noreferrer">resolution-mode</a>.</p><h3 class="anchor anchorWithStickyNavbar_M9ON" id="listando-licenças-de-dependências-desde-v7170">Listando licenças de dependências (desde <a href="https://github.com/pnpm/pnpm/releases/tag/v7.17.0" target="_blank" rel="noopener noreferrer">v7.17.0</a>)<a href="#listando-licenças-de-dependências-desde-v7170" class="hash-link" aria-label="Link direto para listando-licenças-de-dependências-desde-v7170" title="Link direto para listando-licenças-de-dependências-desde-v7170">​</a></h3><p>Agora você pode usar o comando <a href="/pt/cli/licenses"><code>pnpm licenses list</code></a> para verificar as licenças dos pacotes instalados.</p>]]></content>
        <author>
            <name>Zoltan Kochan</name>
            <uri>http://twitter.com/zoltankochan</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[O ano de 2021 para pnpm]]></title>
        <id>https://pnpm.io/pt/blog/2021/12/29/yearly-update</id>
        <link href="https://pnpm.io/pt/blog/2021/12/29/yearly-update"/>
        <updated>2021-12-29T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Estamos no final do ano e foi um bom ano para o pnpm, vamos ver como foi.]]></summary>
        <content type="html"><![CDATA[<p>Estamos no final do ano e foi um bom ano para o pnpm, vamos ver como foi.</p><h2 class="anchor anchorWithStickyNavbar_M9ON" id="uso">Uso<a href="#uso" class="hash-link" aria-label="Link direto para Uso" title="Link direto para Uso">​</a></h2><h3 class="anchor anchorWithStickyNavbar_M9ON" id="números-sobre-downloads">Números sobre Downloads<a href="#números-sobre-downloads" class="hash-link" aria-label="Link direto para Números sobre Downloads" title="Link direto para Números sobre Downloads">​</a></h3><p>Meu objetivo este ano era bater Bower no número de downloads. Conseguimos atingir essa meta <a href="https://npm-stat.com/charts.html?package=pnpm&amp;package=bower&amp;from=2021-01-01&amp;to=2021-12-29" target="_blank" rel="noopener noreferrer">em novembro</a>:</p><p><img loading="lazy" src="/pt/assets/images/pnpm-vs-bower-stats-6ec69a7308f5fbc1433420b1b2f7457f.png" width="976" height="389" class="img_XicP"></p><p>pnpm foi baixado cerca de <a href="https://npm-stat.com/charts.html?package=pnpm&amp;from=2016-12-01&amp;to=2021-12-29" target="_blank" rel="noopener noreferrer">3 vezes mais</a> em 2021 do que em 2020:</p><p><img loading="lazy" src="/pt/assets/images/download-stats-2021-1418562cb03abd558c4a6b4b17155227.png" width="983" height="394" class="img_XicP"></p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_qn3S"><div class="admonitionHeading_ueQW"><span class="admonitionIcon_N0Kn"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>nota</div><div class="admonitionContent_JsRk"><p>Esses números nem sequer medem todas as diferentes formas que pnpm pode ser instalado! Eles só medem os downloads do pacote npm do <a href="https://www.npmjs.com/package/pnpm" target="_blank" rel="noopener noreferrer">pnpm</a>. Este ano adicionamos também versões binárias compiladas de pnpm, que são enviadas de forma diferente.</p></div></div><h3 class="anchor anchorWithStickyNavbar_M9ON" id="visitas-na-documentação">Visitas na Documentação<a href="#visitas-na-documentação" class="hash-link" aria-label="Link direto para Visitas na Documentação" title="Link direto para Visitas na Documentação">​</a></h3><p>Coletamos algumas estatísticas não personalizadas de nossa documentação usando o Google Analytics. Em 2021, algumas vezes tivemos mais de 2.000 visitantes únicos dentro de uma semana.</p><p><img loading="lazy" src="/pt/assets/images/ga-unique-visits-2021-b8bc3649f680565127696c85bdd4b701.png" width="665" height="509" class="img_XicP"></p><p>A maioria dos nossos usuários são dos Estados Unidos e da China.</p><p><img loading="lazy" src="/pt/assets/images/countries-2021-8eb9625e1798649ee04451dfb10ac851.png" width="585" height="498" class="img_XicP"></p><h3 class="anchor anchorWithStickyNavbar_M9ON" id="estrelas-no-github">Estrelas no GitHub<a href="#estrelas-no-github" class="hash-link" aria-label="Link direto para Estrelas no GitHub" title="Link direto para Estrelas no GitHub">​</a></h3><p>Nosso <a href="https://github.com/pnpm/pnpm" target="_blank" rel="noopener noreferrer">repositório principal do GitHub</a> recebeu +5.000 stars este ano.</p><p><img loading="lazy" src="/pt/assets/images/stars-2021-0061c16f424e33ba0db224d82bcb53f3.png" width="913" height="800" class="img_XicP"></p><h3 class="anchor anchorWithStickyNavbar_M9ON" id="novos-usuários">Novos usuários<a href="#novos-usuários" class="hash-link" aria-label="Link direto para Novos usuários" title="Link direto para Novos usuários">​</a></h3><p>Nosso maior usuário novo este ano é a <a href="https://github.com/pnpm/pnpm.github.io/pull/89" target="_blank" rel="noopener noreferrer">Bytedance</a> (a empresa por trás do TikTok).</p><p>Além disso, muitos projetos grandes de código aberto começaram a usar pnpm. Alguns mudaram para pnpm por conta do seu ótimo suporte a monorepos:</p><ul><li><a href="https://github.com/vuejs/vue-next" target="_blank" rel="noopener noreferrer">Vue</a></li><li><a href="https://github.com/vitejs/vite" target="_blank" rel="noopener noreferrer">Vite</a></li><li>e <a href="https://pnpm.io/workspaces#usage-examples" target="_blank" rel="noopener noreferrer">outros</a></li></ul><p>Alguns mudaram porque gostam de quão eficiente, rápido e bonito o pnpm é:</p><ul><li><a href="https://twitter.com/Autoprefixer/status/1476226146488692736" target="_blank" rel="noopener noreferrer">Autoprefixer</a></li><li><a href="https://twitter.com/PostCSS/status/1470438664006258701" target="_blank" rel="noopener noreferrer">PostCSS</a></li><li><a href="https://twitter.com/Browserslist/status/1468264308308156419" target="_blank" rel="noopener noreferrer">Browserslist</a></li></ul><h2 class="anchor anchorWithStickyNavbar_M9ON" id="features-que-se-destacam">Features que se destacam<a href="#features-que-se-destacam" class="hash-link" aria-label="Link direto para Features que se destacam" title="Link direto para Features que se destacam">​</a></h2><h3 class="anchor anchorWithStickyNavbar_M9ON" id="novo-formato-de-lockfile-desde-a-v600">Novo formato de lockfile (desde a <a href="https://github.com/pnpm/pnpm/releases/tag/v6.0.0" target="_blank" rel="noopener noreferrer">v6.0.0</a>)<a href="#novo-formato-de-lockfile-desde-a-v600" class="hash-link" aria-label="Link direto para novo-formato-de-lockfile-desde-a-v600" title="Link direto para novo-formato-de-lockfile-desde-a-v600">​</a></h3><p>Uma das primeiras e mais importantes mudanças deste ano foi o novo formato do arquivo <code>pnpm-lock.yaml</code>. Esta foi uma breaking change, então tivemos que lançar a v6. Mas foi um sucesso. O antigo lockfile estava causando conflitos no Git com frequência. Desde que o novo formato foi introduzido, não recebemos nenhuma reclamação sobre conflitos do Git.</p><h3 class="anchor anchorWithStickyNavbar_M9ON" id="gerenciando-versões-do-node-desde-v6120">Gerenciando Versões do Node (desde <a href="https://github.com/pnpm/pnpm/releases/tag/v6.12.0" target="_blank" rel="noopener noreferrer">v6.12.0</a>)<a href="#gerenciando-versões-do-node-desde-v6120" class="hash-link" aria-label="Link direto para gerenciando-versões-do-node-desde-v6120" title="Link direto para gerenciando-versões-do-node-desde-v6120">​</a></h3><p>Enviamos um novo comando (<code>pnpm env</code>) que permite gerenciar versões do Node.js. Então você pode usar pnpm em vez de gerenciadores de versão Node.js como nvm ou Volta.</p><p>Além disso, o pnpm é fornecido como um executável autônomo, para que você possa executá-lo mesmo sem o Node.js pré-instalado no sistema.</p><h3 class="anchor anchorWithStickyNavbar_M9ON" id="gerenciando-versões-do-node-desde-v6200">Gerenciando Versões do Node (desde <a href="https://github.com/pnpm/pnpm/releases/tag/v6.20.0" target="_blank" rel="noopener noreferrer">v6.20.0</a>)<a href="#gerenciando-versões-do-node-desde-v6200" class="hash-link" aria-label="Link direto para gerenciando-versões-do-node-desde-v6200" title="Link direto para gerenciando-versões-do-node-desde-v6200">​</a></h3><p>Você pode "injetar" uma dependência local. Por padrão, as dependências locais são vinculadas a <code>node_modules</code>, mas com esse novo recurso você pode instruir o pnpm a fazer um link físico dos arquivos do pacote.</p><h3 class="anchor anchorWithStickyNavbar_M9ON" id="relatórios-aprimorados-de-problemas-de-dependência-de-pares-desde-v6240">Relatórios aprimorados de problemas de dependência de pares (desde <a href="https://github.com/pnpm/pnpm/releases/tag/v6.24.0" target="_blank" rel="noopener noreferrer">v6.24.0</a>)<a href="#relatórios-aprimorados-de-problemas-de-dependência-de-pares-desde-v6240" class="hash-link" aria-label="Link direto para relatórios-aprimorados-de-problemas-de-dependência-de-pares-desde-v6240" title="Link direto para relatórios-aprimorados-de-problemas-de-dependência-de-pares-desde-v6240">​</a></h3><p>Os problemas de dependência de pares costumavam ser impressos como texto simples e era difícil entendê-los. Eles agora estão todos agrupados e impressos em uma boa estrutura de hierarquia.</p><h2 class="anchor anchorWithStickyNavbar_M9ON" id="a-concorrência">A Concorrência<a href="#a-concorrência" class="hash-link" aria-label="Link direto para A Concorrência" title="Link direto para A Concorrência">​</a></h2><h3 class="anchor anchorWithStickyNavbar_M9ON" id="yarn">Yarn<a href="#yarn" class="hash-link" aria-label="Link direto para Yarn" title="Link direto para Yarn">​</a></h3><p>Yarn adicionou um linker pnpm em <a href="https://dev.to/arcanis/yarn-31-corepack-esm-pnpm-optional-packages--3hak#new-install-mode-raw-pnpm-endraw-" target="_blank" rel="noopener noreferrer">v3.1</a>. Para que o Yarn possa criar uma estrutura de diretório de módulos semelhante à que o pnpm cria.</p><p>Além disso, a equipe Yarn planeja implementar um armazenamento enderesável por conteúdo para ser mais eficiente em espaço em disco.</p><h3 class="anchor anchorWithStickyNavbar_M9ON" id="npm">npm<a href="#npm" class="hash-link" aria-label="Link direto para npm" title="Link direto para npm">​</a></h3><p>A equipe do npm decidiu adotar também a estrutura de diretórios de módulos de nó com link simbólico que o pnpm usa (relacionado <a href="https://github.com/npm/rfcs/blob/main/accepted/0042-isolated-mode.md" target="_blank" rel="noopener noreferrer">RFC</a>).</p><h3 class="anchor anchorWithStickyNavbar_M9ON" id="outros">Outros<a href="#outros" class="hash-link" aria-label="Link direto para Outros" title="Link direto para Outros">​</a></h3><p><a href="https://twitter.com/jarredsumner/status/1473416431291174912/photo/1" target="_blank" rel="noopener noreferrer">Bun</a> escrito em Zig e <a href="https://github.com/voltpkg/volt" target="_blank" rel="noopener noreferrer">Volt</a> escrito em Rust ambos afirmam ser mais rápido do que npm/Yarn/pnpm. Ainda não fiz benchmark desses novos gerentes de pacotes.</p><h2 class="anchor anchorWithStickyNavbar_M9ON" id="planos-futuros">Planos futuros<a href="#planos-futuros" class="hash-link" aria-label="Link direto para Planos futuros" title="Link direto para Planos futuros">​</a></h2><p>Mais rápido, melhor, melhor.</p>]]></content>
        <author>
            <name>Zoltan Kochan</name>
            <uri>http://twitter.com/zoltankochan</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[Opções de configuração com pnpm]]></title>
        <id>https://pnpm.io/pt/blog/2020/10/17/node-modules-configuration-options-with-pnpm</id>
        <link href="https://pnpm.io/pt/blog/2020/10/17/node-modules-configuration-options-with-pnpm"/>
        <updated>2020-10-17T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Existem diversas maneiras de criar um diretório nodemodules. Seu objetivo deve ser criar o mais estrito, mas caso não seja possível, há opções para criar um nodemodules solto também.]]></summary>
        <content type="html"><![CDATA[<p>Existem diversas maneiras de criar um diretório node_modules. Seu objetivo deve ser criar o mais estrito, mas caso não seja possível, há opções para criar um node_modules solto também.</p><h2 class="anchor anchorWithStickyNavbar_M9ON" id="a-configuração-padrão">A configuração padrão<a href="#a-configuração-padrão" class="hash-link" aria-label="Link direto para A configuração padrão" title="Link direto para A configuração padrão">​</a></h2><p>Por padrão, o pnpm v5 criará um node_modules semi-estrito. Semi-estrito significa que sua aplicação só poderá requisitar pacotes inclusos como dependência ao <code>package.json</code> (com algumas exceções). No entanto, suas dependências poderão acessar qualquer pacote.</p><p>A configuração padrão fica assim:</p><div class="language-ini codeBlockContainer_PfM4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_sVD5"><pre tabindex="0" class="prism-code language-ini codeBlock_IFdB thin-scrollbar"><code class="codeBlockLines__UdX"><span class="token-line" style="color:#393A34"><span class="token plain">; Todos os pacotes são hoisted(elevados) ao node_modules/.pnpm/node_modules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hoist-pattern[]=*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; Todos os tipos são hoisted(elevados) à raiz para satisfazer o TypeScript</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public-hoist-pattern[]=*types*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; Todos os pacotes relacionados ao ESLint são hoisted(elevados) à raiz também</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public-hoist-pattern[]=*eslint*</span><br></span></code></pre><div class="buttonGroup_W9z0"><button type="button" aria-label="Copiar para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_U9Tg" aria-hidden="true"><svg class="copyButtonIcon_jN4X" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_ajRE" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_M9ON" id="plugnplay-a-configuração-mais-rígida">Plug'n'Play. A configuração mais rígida<a href="#plugnplay-a-configuração-mais-rígida" class="hash-link" aria-label="Link direto para Plug'n'Play. A configuração mais rígida" title="Link direto para Plug'n'Play. A configuração mais rígida">​</a></h2><p>O pnpm suporta <a href="https://yarnpkg.com/features/pnp" target="_blank" rel="noopener noreferrer">Plug'n'Play do Yarn</a> desde a versão v5.9. Com o PnP, tanto sua aplicação quanto as dependências terão acesso apenas às dependências declaradas. Isso é ainda mais restrito do que setar <code>hoist=false</code> porque, dentro de um monorepo, a sua aplicação não ter acesso até para as dependencias do projeto raiz.</p><p>Para usar o Plug'n'Play, defina estas configurações:</p><div class="language-ini codeBlockContainer_PfM4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_sVD5"><pre tabindex="0" class="prism-code language-ini codeBlock_IFdB thin-scrollbar"><code class="codeBlockLines__UdX"><span class="token-line" style="color:#393A34"><span class="token plain">node-linker=pnp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">symlink=false</span><br></span></code></pre><div class="buttonGroup_W9z0"><button type="button" aria-label="Copiar para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_U9Tg" aria-hidden="true"><svg class="copyButtonIcon_jN4X" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_ajRE" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_M9ON" id="um-diretório-de-módulos-estrito-e-tradicional">Um diretório de módulos estrito e tradicional<a href="#um-diretório-de-módulos-estrito-e-tradicional" class="hash-link" aria-label="Link direto para Um diretório de módulos estrito e tradicional" title="Link direto para Um diretório de módulos estrito e tradicional">​</a></h2><p>Caso não esteja pronto para usar o PnP, ainda é possível ser estrito e permitir que pacotes acessem apenas suas próprias dependências definindo a configuração do hoist como falsa:</p><div class="language-ini codeBlockContainer_PfM4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_sVD5"><pre tabindex="0" class="prism-code language-ini codeBlock_IFdB thin-scrollbar"><code class="codeBlockLines__UdX"><span class="token-line" style="color:#393A34"><span class="token plain">hoist=false</span><br></span></code></pre><div class="buttonGroup_W9z0"><button type="button" aria-label="Copiar para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_U9Tg" aria-hidden="true"><svg class="copyButtonIcon_jN4X" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_ajRE" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>No entando, se algumas de suas dependências estão tentando acessar pacotes que não possuem nas depedências, há duas opções:</p><ol><li><p>Crie um <code>pnpmfile.js</code> e use um <a href="/pt/pnpmfile">hook</a> para adicionar a dependência que falta ao manifesto do pacote.</p></li><li><p>Adicione um padrão à configuração do <code>hoist-pattern</code>. Por exemplo, se o módulo não encontrado foi <code>babel-core</code>, adicione a seguinte configuração ao <code>.npmrc</code>:</p><div class="language-ini codeBlockContainer_PfM4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_sVD5"><pre tabindex="0" class="prism-code language-ini codeBlock_IFdB thin-scrollbar"><code class="codeBlockLines__UdX"><span class="token-line" style="color:#393A34"><span class="token plain">hoist-pattern[]=babel-core</span><br></span></code></pre><div class="buttonGroup_W9z0"><button type="button" aria-label="Copiar para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_U9Tg" aria-hidden="true"><svg class="copyButtonIcon_jN4X" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_ajRE" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><h2 class="anchor anchorWithStickyNavbar_M9ON" id="o-pior-caso--hoistingelevação-à-raiz">O pior caso — hoisting(elevação) à raiz<a href="#o-pior-caso--hoistingelevação-à-raiz" class="hash-link" aria-label="Link direto para O pior caso — hoisting(elevação) à raiz" title="Link direto para O pior caso — hoisting(elevação) à raiz">​</a></h2><p>Algumas ferramentas podem não funcionar, mesmo com a configuração padrão do pnpm, que move tudo para a raiz da loja virtual e alguns pacotes para a raiz. Nesse caso, é possível fazer um hoist(elevar) tudo ou apenas uma parte das dependências à raiz do diretório de módulos.</p><p>Mover tudo para a raiz:</p><div class="language-ini codeBlockContainer_PfM4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_sVD5"><pre tabindex="0" class="prism-code language-ini codeBlock_IFdB thin-scrollbar"><code class="codeBlockLines__UdX"><span class="token-line" style="color:#393A34"><span class="token plain">shamefully-hoist=true</span><br></span></code></pre><div class="buttonGroup_W9z0"><button type="button" aria-label="Copiar para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_U9Tg" aria-hidden="true"><svg class="copyButtonIcon_jN4X" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_ajRE" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Fazer hoisting(elevar) apenas os pacotes que correspondem a um padrão:</p><div class="language-ini codeBlockContainer_PfM4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_sVD5"><pre tabindex="0" class="prism-code language-ini codeBlock_IFdB thin-scrollbar"><code class="codeBlockLines__UdX"><span class="token-line" style="color:#393A34"><span class="token plain">public-hoist-pattern[]=babel-*</span><br></span></code></pre><div class="buttonGroup_W9z0"><button type="button" aria-label="Copiar para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_U9Tg" aria-hidden="true"><svg class="copyButtonIcon_jN4X" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_ajRE" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
        <author>
            <name>Zoltan Kochan</name>
            <uri>http://twitter.com/zoltankochan</uri>
        </author>
    </entry>
    <entry>
        <title type="html"><![CDATA[node_modules planos não são a única maneira]]></title>
        <id>https://pnpm.io/pt/blog/2020/05/27/flat-node-modules-is-not-the-only-way</id>
        <link href="https://pnpm.io/pt/blog/2020/05/27/flat-node-modules-is-not-the-only-way"/>
        <updated>2020-05-27T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Novos usuários do pnpm frequentemente me perguntam acerca da estranha estrutura do node_modules que o pnpm cria. Por que não é plano? Onde estão todas as sub-dependências?]]></summary>
        <content type="html"><![CDATA[<p>Novos usuários do pnpm frequentemente me perguntam acerca da estranha estrutura do <code>node_modules</code> que o pnpm cria. Por que não é plano? Onde estão todas as sub-dependências?</p><blockquote><p>Vou assumir que os leitores do artigo já estão familiarizados com o <code>node_modules</code> plano criado pelo npm e Yarn. Se você não entende por que o npm 3 teve que começar a usar <code>node_modules</code> planos na v3, você pode encontrar um pouco da história em <a href="https://www.kochan.io/nodejs/why-should-we-use-pnpm.html" target="_blank" rel="noopener noreferrer">Por que devemos usar o pnpm?</a>.</p></blockquote><p>Então, por que o <code>node_modules</code> do pnpm é incomum? Vamos criar dois diretórios e executar <code>npm add express</code> em um deles e <code>pnpm add express</code> no outro. Aqui está o início do <code>node_modules</code> do primeiro diretório:</p><div class="language-text codeBlockContainer_PfM4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_sVD5"><pre tabindex="0" class="prism-code language-text codeBlock_IFdB thin-scrollbar"><code class="codeBlockLines__UdX"><span class="token-line" style="color:#393A34"><span class="token plain">.bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">accepts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">array-flatten</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">body-parser</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bytes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">content-disposition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cookie-signature</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cookie</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">debug</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">depd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">destroy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ee-first</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">encodeurl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">escape-html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">etag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">express</span><br></span></code></pre><div class="buttonGroup_W9z0"><button type="button" aria-label="Copiar para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_U9Tg" aria-hidden="true"><svg class="copyButtonIcon_jN4X" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_ajRE" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Você pode ver todo o diretório <a href="https://github.com/zkochan/comparing-node-modules/tree/master/npm-example/node_modules" target="_blank" rel="noopener noreferrer">aqui</a>.</p><p>E é isso que você obtém no <code>node_modules</code> criado pelo pnpm:</p><div class="language-text codeBlockContainer_PfM4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_sVD5"><pre tabindex="0" class="prism-code language-text codeBlock_IFdB thin-scrollbar"><code class="codeBlockLines__UdX"><span class="token-line" style="color:#393A34"><span class="token plain">.pnpm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.modules.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">express</span><br></span></code></pre><div class="buttonGroup_W9z0"><button type="button" aria-label="Copiar para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_U9Tg" aria-hidden="true"><svg class="copyButtonIcon_jN4X" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_ajRE" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Você pode conferir <a href="https://github.com/zkochan/comparing-node-modules/tree/master/pnpm5-example/node_modules" target="_blank" rel="noopener noreferrer">aqui</a>.</p><p>Então, onde estão todas as dependências? Existe apenas uma pasta em <code>node_modules</code> chamada <code>.pnpm</code> e um link simbólico chamado <code>express</code>. Bem, instalamos apenas <code>express</code>, então esse é o único pacote que sua aplicação tem que ter acesso</p><blockquote><p>Leia mais sobre porque o rigor do pnpm é uma coisa boa <a href="https://medium.com/pnpm/pnpms-strictness-helps-to-avoid-silly-bugs-9a15fb306308" target="_blank" rel="noopener noreferrer">aqui</a></p></blockquote><p>Vamos ver o que está dentro de <code>express</code>:</p><div class="language-text codeBlockContainer_PfM4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_sVD5"><pre tabindex="0" class="prism-code language-text codeBlock_IFdB thin-scrollbar"><code class="codeBlockLines__UdX"><span class="token-line" style="color:#393A34"><span class="token plain">▾ node_modules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ▸ .pnpm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ▾ express</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ▸ lib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      History.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      index.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      LICENSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      package.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Readme.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  .modules.yaml</span><br></span></code></pre><div class="buttonGroup_W9z0"><button type="button" aria-label="Copiar para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_U9Tg" aria-hidden="true"><svg class="copyButtonIcon_jN4X" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_ajRE" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>express</code> não tem <code>node_modules</code>? Onde estão todas as dependências de <code>express</code>?</p><p>O truque é que <code>express</code> é apenas um link simbólico. Quando o Node.js resolve dependências, ele usa suas localizações reais, portanto, não preserva links simbólicos. Mas onde está a localização real de <code>express</code>, você pode perguntar?</p><p>Aqui: <a href="https://github.com/zkochan/comparing-node-modules/tree/master/pnpm5-example/node_modules/.pnpm/express@4.17.1/node_modules/express" target="_blank" rel="noopener noreferrer">node_modules/.pnpm/express@4.17.1/node_modules/express</a>.</p><p>OK, agora sabemos o propósito da pasta <code>.pnpm/</code>. <code>.pnpm/</code> armazena todos os pacotes em uma estrutura de pastas simples, então cada pacote pode ser encontrado em uma pasta nomeada por este padrão:</p><div class="language-text codeBlockContainer_PfM4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_sVD5"><pre tabindex="0" class="prism-code language-text codeBlock_IFdB thin-scrollbar"><code class="codeBlockLines__UdX"><span class="token-line" style="color:#393A34"><span class="token plain">.pnpm/&lt;name&gt;@&lt;version&gt;/node_modules/&lt;name&gt;</span><br></span></code></pre><div class="buttonGroup_W9z0"><button type="button" aria-label="Copiar para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_U9Tg" aria-hidden="true"><svg class="copyButtonIcon_jN4X" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_ajRE" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Nós o chamamos de virtual store directory.</p><p>Essa estrutura plana evita os problemas de longos diretórios causados pelo <code>node_modules</code> aninhados criado pelo npm v2, mas mantém os pacotes isolados ao contrário dos <code>node_modules</code> criados pelo npm v3,4,5,6 ou Yarn v1.</p><p>Agora vamos olhar para a localização real de <code>express</code>:</p><div class="language-text codeBlockContainer_PfM4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_sVD5"><pre tabindex="0" class="prism-code language-text codeBlock_IFdB thin-scrollbar"><code class="codeBlockLines__UdX"><span class="token-line" style="color:#393A34"><span class="token plain">  ▾ express</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ▸ lib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      History.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      index.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      LICENSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      package.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Readme.md</span><br></span></code></pre><div class="buttonGroup_W9z0"><button type="button" aria-label="Copiar para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_U9Tg" aria-hidden="true"><svg class="copyButtonIcon_jN4X" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_ajRE" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>É uma farsa? Ainda falta <code>node_modules</code>! O segundo truque da estrutura <code>node_modules</code> do pnpm é que as dependências dos pacotes estão no mesmo nível de diretório em que a localização real da dependência. Portanto, as dependências de <code>express</code> não estão em <code>.pnpm/express@4.17.1/node_modules/express/node_modules/</code> mas em <a href="https://github.com/zkochan/comparing-node-modules/tree/master/pnpm5-example/node_modules/.pnpm/express@4.17.1/node_modules" target="_blank" rel="noopener noreferrer">.pnpm/express@4.17.1/node_modules/</a>:</p><div class="language-text codeBlockContainer_PfM4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_sVD5"><pre tabindex="0" class="prism-code language-text codeBlock_IFdB thin-scrollbar"><code class="codeBlockLines__UdX"><span class="token-line" style="color:#393A34"><span class="token plain">▾ node_modules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ▾ .pnpm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ▸ accepts@1.3.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ▸ array-flatten@1.1.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ▾ express@4.16.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ▾ node_modules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ▸ accepts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ▸ array-flatten</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ▸ body-parser</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ▸ content-disposition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ▸ etag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ▾ express</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ▸ lib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            History.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            index.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            LICENSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            package.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Readme.md</span><br></span></code></pre><div class="buttonGroup_W9z0"><button type="button" aria-label="Copiar para a área de transferência" title="Copiar" class="clean-btn"><span class="copyButtonIcons_U9Tg" aria-hidden="true"><svg class="copyButtonIcon_jN4X" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_ajRE" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Todas as dependências de <code>express</code> são links simbólicos para diretórios apropriados em <code>node_modules/.pnpm/</code>. Colocar dependências de <code>express</code> um nível acima permite evitar links simbólicos circulares.</p><p>Então, como você pode ver, mesmo que o <code>node_modules</code> do pnpm pareça incomum no início:</p><ol><li>é totalmente compatível com Node.js</li><li>os pacotes são bem agrupados com suas dependências</li></ol><p>A estrutura é um pouco <a href="/pt/how-peers-are-resolved">mais complexa</a> para pacotes com dependências peer, mas a ideia é a mesma: usar links simbólicos para criar um aninhamento com uma estrutura de diretório simples.</p>]]></content>
        <author>
            <name>Zoltan Kochan</name>
            <uri>http://twitter.com/zoltankochan</uri>
        </author>
    </entry>
</feed>